<%= render 'shared/error_messages' %>

<%= f.label :first_name %>
<%= f.text_field :first_name %>

<%= f.label :last_name %>
<%= f.text_field :last_name %>

<%= f.label :preferred_name %>
<%= f.text_field :preferred_name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :street_address %>
<%= f.text_field :street_address %>

<%= f.label :city %>
<%= f.text_field :city %>

<%= f.label :state %>
<%= f.text_field :state, maxlength: 2 %>

<%= f.label :postal_code %>
<%= f.text_field :postal_code %>

<%= f.label :mobile_phone %>
<%= f.text_field :mobile_phone %>

<%= f.label :home_phone %>
<%= f.text_field :home_phone %>

<%= f.label :work_phone %>
<%= f.text_field :work_phone %>

<%= f.label :primary_phone, class: 'input-inline' %><br>
<%= f.radio_button :primary_phone, 0 %>
<%= f.label :primary_phone_mobile, 'Mobile',  class: 'input-inline' %><br>
<%= f.radio_button :primary_phone, 1 %>
<%= f.label :primary_phone_home, 'Home',  class: 'input-inline' %><br>
<%= f.radio_button :primary_phone, 2 %>
<%= f.label :primary_phone_work, 'Work',  class: 'input-inline' %><br>
<br>
<%= f.label :birthday %>
<%= f.date_field :birthday %>

<%= f.check_box :directory_public %>
<%= f.label :directory_public, 'Make profile public' %>
<div><br></div>
<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, 'Confirm Password' %>
<%= f.password_field :password_confirmation %>

<% if current_user.admin? %>
    <%= f.check_box :admin %>
    <%= f.label :admin, class: 'input-inline' %>
    <div><br></div>
    <%= f.label :family_id %>
    <%= f.select :family_id, User.where('id = family_id AND id != ?', @user ? @user.id : -1).sort_by{|user| user.first_name}.collect {|m| [ m.full_name, m.id ] },
                 include_blank: 'None', disabled: @user ? false : !@user.family.blank? && @user.id == @user.family_id %>

    <%= f.label :spouse_id %>
    <%= f.select :spouse_id, User.where('id != ?', @user ? @user.id : -1).sort_by{|user| user.first_name}.collect {|m| [ m.full_name, m.id ] },
                 include_blank: 'None', disabled: @user ? !User.find_by_spouse_id(@user.id).blank? : false,
                 selected: (@user && !User.find_by_spouse_id(@user.id).blank?) ? User.find_by_spouse_id(@user.id) : '' %>
<% end %>